{"remainingRequest":"D:\\Study\\Graduate\\GraduateThesis\\Study\\Study\\BlockChain\\BlockChain\\NetworkSecurityInnovationCompetition\\CYLmanage\\vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\Study\\Graduate\\GraduateThesis\\Study\\Study\\BlockChain\\BlockChain\\NetworkSecurityInnovationCompetition\\CYLmanage\\vue\\src\\views\\Cmt.vue?vue&type=style&index=0&id=1f543c00&lang=css","dependencies":[{"path":"D:\\Study\\Graduate\\GraduateThesis\\Study\\Study\\BlockChain\\BlockChain\\NetworkSecurityInnovationCompetition\\CYLmanage\\vue\\src\\views\\Cmt.vue","mtime":1733386981239},{"path":"D:\\Study\\Graduate\\GraduateThesis\\Study\\Study\\BlockChain\\BlockChain\\NetworkSecurityInnovationCompetition\\CYLmanage\\vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1742376499001},{"path":"D:\\Study\\Graduate\\GraduateThesis\\Study\\Study\\BlockChain\\BlockChain\\NetworkSecurityInnovationCompetition\\CYLmanage\\vue\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1742376499016},{"path":"D:\\Study\\Graduate\\GraduateThesis\\Study\\Study\\BlockChain\\BlockChain\\NetworkSecurityInnovationCompetition\\CYLmanage\\vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1742376498915},{"path":"D:\\Study\\Graduate\\GraduateThesis\\Study\\Study\\BlockChain\\BlockChain\\NetworkSecurityInnovationCompetition\\CYLmanage\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1742376499832},{"path":"D:\\Study\\Graduate\\GraduateThesis\\Study\\Study\\BlockChain\\BlockChain\\NetworkSecurityInnovationCompetition\\CYLmanage\\vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1742376498926}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgLmVsLWZyb20taXRlbV9fbGFiZWwgewogICAgY29sb3I6ICMzNjc4Y2Y7CiAgfQoK"},{"version":3,"sources":["D:\\Study\\Graduate\\GraduateThesis\\Study\\Study\\BlockChain\\BlockChain\\NetworkSecurityInnovationCompetition\\CYLmanage\\vue\\src\\views\\Cmt.vue"],"names":[],"mappings":";EA6TE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACnB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAChB","file":"D:/Study/Graduate/GraduateThesis/Study/Study/BlockChain/BlockChain/NetworkSecurityInnovationCompetition/CYLmanage/vue/src/views/Cmt.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"home\" style =\"padding: 10px\">\n    <h1 style=\"text-align:center\">数据资产列表</h1>\n    <!-- 搜索-->\n    <div style=\"margin: 10px 0;\">\n      <el-form inline=\"true\" size=\"small\" style=\"font-weight: bold\">\n        <el-form-item label=\"资产编号\" v-if=\"user.role == 1\" style=\"margin-right: 20px; margin-left: 200px\">\n          <el-input v-model=\"search1\" placeholder=\"请输入资产编号\"  clearable>\n            <template #prefix><el-icon class=\"el-input__icon\"><search/></el-icon></template>\n          </el-input>\n        </el-form-item >\n        <el-form-item label=\"数据类型\" style=\"margin-right: 20px\">\n          <el-input v-model=\"search2\" placeholder=\"请输入数据资产类型\"  clearable>\n            <template #prefix><el-icon class=\"el-input__icon\"><search /></el-icon></template>\n          </el-input>\n        </el-form-item >\n        <el-form-item label=\"数据持有者\" style=\"margin-right: 20px\">\n          <el-input v-model=\"search3\" placeholder=\"请输入数据持有者\"  clearable>\n            <template #prefix><el-icon class=\"el-input__icon\"><search /></el-icon></template>\n          </el-input>\n        </el-form-item >\n        <el-form-item label=\"数据名称\" style=\"margin-right: 20px\">\n          <el-input v-model=\"search4\" placeholder=\"请输入数据资产名称\"  clearable>\n            <template #prefix><el-icon class=\"el-input__icon\"><search /></el-icon></template>\n          </el-input>\n        </el-form-item >\n\n        <el-form-item>\n          <el-button type=\"primary\" style=\"margin-left: 1%\" @click=\"load\" size=\"mini\" >\n            <svg-icon iconClass=\"search\"/>查询</el-button>\n        </el-form-item>\n        <el-form-item>\n          <el-button size=\"mini\"  type=\"danger\" @click=\"clear\">重置</el-button>\n        </el-form-item>\n\n      </el-form>\n    </div>\n    <p><el-button  type=\"success\" size=\"mini\" @click=\"handleAdd\" >上传数据</el-button></p>\n\n<!-- 数据字段-->\n    <el-table :data=\"tableData\" stripe border=\"true\"  @selection-change=\"handleSelectionChange\"\n              :header-cell-style=\"{ fontSize: '20px', color: 'black'}\"\n              :cell-style=\"{ fontSize: '15px' }\"\n    >\n      <el-table-column v-if=\"user.role ==1\"\n                       type=\"selection\"\n                       width=\"55\">\n      </el-table-column>\n      <el-table-column prop=\"tokenid\" label=\"资产编号\"  align=\"center\" min-width=\"30\" sortable\n                       :header-cell-style=\"{ fontSize: '50px' }\"\n                       :cell-style=\"{ fontSize: '200px' }\"/>\n      <el-table-column prop=\"name\" label=\"数据名称\"  align=\"center\" min-width=\"50\" />\n      <el-table-column prop=\"type\" label=\"数据类型\" min-width=\"50\" align=\"center\" />\n      <el-table-column prop=\"username\" label=\"数据持有者\" min-width=\"50\" align=\"center\" />\n      <el-table-column prop=\"qtype\" label=\"权属类型\"  align=\"center\" min-width=\"60\"/>\n      <el-table-column fixed=\"right\" label=\"操作\" min-width=\"50\" align=\"center\" style=\"font-size: 200px\">\n        <template v-slot=\"scope\">\n          <el-button  type=\"success\" size=\"mini\" @click =\"handleEdit(scope.row)\">管理</el-button>\n          <el-popconfirm title=\"确认删除?\" @confirm=\"handleDelete(scope.row.cmtId)\">\n            <template #reference>\n              <el-button type=\"danger\" size=\"mini\" >下线</el-button>\n            </template>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n<!--    分页-->\n    <div style=\"margin: 10px 0\">\n      <el-pagination\n          v-model:currentPage=\"currentPage\"\n          :page-sizes=\"[13, 20, 30]\"\n          :page-size=\"pageSize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=2196\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n      >\n      </el-pagination>\n\n      <el-dialog v-model=\"dialogVisible\" title=\"更新数据SFT信息\" width=\"30%\">\n        <el-form :model=\"form\" label-width=\"120px\">\n          <el-form-item label=\"资产编号\">\n            <el-input style=\"width: 80%\" disabled v-model=\"form.tokenid\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"数据名称\">\n            <el-input style=\"width: 80%\" v-model=\"form.name\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"数据类型\">\n            <el-input style=\"width: 80%\" v-model=\"form.type\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"数据持有者\">\n            <el-input style=\"width: 80%\" v-model=\"form.username\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"权属类型\">\n            <el-input style=\"width: 80%\" v-model=\"form.qtype\"></el-input>\n          </el-form-item>\n\n        </el-form>\n        <template #footer>\n      <span class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"save\">确 定</el-button>\n      </span>\n        </template>\n      </el-dialog>\n\n      <!--      添加新团委-->\n      <el-dialog v-model=\"dialogVisible_cmt\" title=\"上传数据资产\" width=\"30%\">\n        <el-form :model=\"form_add\" label-width=\"120px\">\n          <el-form-item label=\"资产编号\">\n            <el-input style=\"width: 80%\" v-model=\"form_add.tokenid\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"数据名称\">\n            <el-input style=\"width: 80%\" v-model=\"form_add.name\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"数据类型\">\n            <el-input style=\"width: 80%\" v-model=\"form_add.type\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"数据持有者\">\n            <el-input style=\"width: 80%\" v-model=\"form_add.username\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"权属类型\">\n            <el-input style=\"width: 80%\" v-model=\"form_add.qtype\"></el-input>\n          </el-form-item>\n\n        </el-form>\n        <template #footer>\n      <span class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible_cmt = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"add\">确 定</el-button>\n      </span>\n        </template>\n      </el-dialog>\n    </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport request from \"../utils/request\";\nimport {ElMessage} from \"element-plus\";\n\nexport default {\n  created(){\n    this.load()\n    let userStr = sessionStorage.getItem(\"user\") ||\"{}\"\n    this.user = JSON.parse(userStr)\n  },\n  name: 'User',\n  methods: {\n\n    handleSelectionChange(val){\n      this.ids = val.map(v => v.id)\n    },\n    deleteBatch(){\n      if (!this.ids.length) {\n        ElMessage.warning(\"请选择数据！\")\n        return\n      }\n      //  一个小优化，直接发送这个数组，而不是一个一个的提交删除\n      request.post(\"/cmt/deleteBatch\",this.ids).then(res =>{\n        if(res.code === '0'){\n          ElMessage.success(\"批量删除成功\")\n          this.load()\n        }\n        else {\n          ElMessage.error(res.msg)\n        }\n      })\n    },\n    load(){\n      request.get(\"cmt/cmtsearch\",{\n        params:{\n          pageNum: this.currentPage,\n          pageSize: this.pageSize,\n          search1: this.search1,\n          search2: this.search2,\n          search3: this.search3,\n          search4: this.search4,\n        }\n      }).then(res =>{\n        console.log(res)\n        this.tableData = res.data.records\n        this.total = res.data.total\n      })\n    },\n    clear(){\n      this.search1 = \"\"\n      this.search2 = \"\"\n      this.search3 = \"\"\n      this.search4 = \"\"\n      this.load()\n    },\n\n    handleDelete(id){\n      request.delete(\"cmt/\" + id ).then(res =>{\n        console.log(res)\n        if(res.code == 0 ){\n          ElMessage.success(\"删除成功\")\n        }\n        else\n          ElMessage.error(res.msg)\n        this.load()\n      })\n    },\n\n\n    handleAdd(){\n      this.form_add={}\n      this.dialogVisible_cmt= true\n    },\n    // 新增数据\n    add(){\n      if(this.form_add.tokenid){\n        request.post(\"/cmt/add\",this.form_add).then(res =>{\n          console.log(res)\n          if(res.code == 0){\n            ElMessage({\n              message: '添加成功',\n              type: 'success',\n            })\n\n          }\n          else {\n            ElMessage.error(res.msg)\n          }\n\n          this.load()\n          this.dialogVisible_cmt = false\n        })\n      }\n      else {\n\n          ElMessage.error(\"请输入ID\")\n          this.load()\n          this.dialogVisible_cmt = false\n        }\n      },\n\n\n\n    save(){\n      if(this.form.tokenid){\n        // console.log(hhh)\n        request.put(\"/cmt\",this.form).then(res =>{\n          console.log(res)\n          if(res.code == 0){\n            ElMessage({\n              message: '更新成功',\n              type: 'success',\n            })\n          }\n          else {\n            ElMessage.error(res.msg)\n          }\n\n          this.load()\n          this.dialogVisible = false\n          this.dialogVisible_cmt = false\n        })\n      }\n      else {\n        // console.log(ggh)\n        request.post(\"/cmt\",this.form).then(res =>{\n          console.log(res)\n          if(res.code == 0){\n            ElMessage.success('添加成功')\n          }\n          else {\n            ElMessage.error(res.msg)\n          }\n          this.load()\n          this.dialogVisible = false\n          this.dialogVisible_cmt = false\n        })\n      }\n\n    },\n\n\n    handleEdit(row){\n      this.form = JSON.parse(JSON.stringify(row))\n      this.dialogVisible = true\n    },\n    handleSizeChange(pageSize){\n      this.pageSize = pageSize\n      this.load()\n    },\n    handleCurrentChange(pageNum){\n      this.pageNum = pageNum\n      this.load()\n    },\n  },\n  data() {\n    return {\n      form: {},\n      form_add: {},\n      dialogVisible : false,\n      dialogVisible_cmt : false,\n      search1:'',\n      search2:'',\n      search3:'',\n      search4:'',\n      total:10,\n      currentPage:1,\n      pageSize: 9,\n      tableData: [\n\n      ],\n      user:{},\n      ids:[],\n    }\n  },\n}\n</script>\n\n<style>\n  .el-from-item__label {\n    color: #3678cf;\n  }\n\n</style>"]}]}